<!DOCTYPE html>

<html>
<head>
    <title>Perspectives - LD #23</title>
    
    <!--
    	{FM.js(Engine);}
    -->
    <script type="text/javascript" src="lib/fm/fmjsengine-min.js"></script>
    <!--
    	Perspectives entry point.
    -->
    <script>
        //Include JS files
        FM.includeJsFile("src/menuState.js");
        FM.includeJsFile("src/playState.js");
        FM.includeJsFile("src/endState.js");
        FM.includeJsFile("src/avatar.js");

        var start = function () {
            "use strict";
            //Add assets
            var assetManager = FM.AssetManager,
                param = FM.Parameters;
            //Debug mode
            //param.debug = true;

            //Audio
            if (!assetManager.addAsset("explode", param.AUDIO, "assets/sfx/explode.wav")) {
                assetManager.addAsset("explode", param.AUDIO, "assets/sfx/explode.mp3");
            }
            if (!assetManager.addAsset("fly", param.AUDIO, "assets/sfx/fly.wav")) {
                assetManager.addAsset("fly", param.AUDIO, "assets/sfx/fly.mp3");
            }
            if (!assetManager.addAsset("music", param.AUDIO, "assets/sfx/music.wav")) {
                assetManager.addAsset("music", param.AUDIO, "assets/sfx/music.mp3");
            }

            //Images
            assetManager.addAsset("avatar", param.IMAGE, "assets/gfx/avatar.png");
            assetManager.addAsset("npc1", param.IMAGE, "assets/gfx/npc1.png");
            assetManager.addAsset("npc2", param.IMAGE, "assets/gfx/npc2.png");
            assetManager.addAsset("npc3", param.IMAGE, "assets/gfx/npc3.png");
            assetManager.addAsset("background", param.IMAGE, "assets/gfx/background.png");
            assetManager.addAsset("end", param.IMAGE, "assets/gfx/end.png");

            assetManager.addAsset("tileset", param.IMAGE, "assets/gfx/tileset.png");
            assetManager.addAsset("ground1", param.IMAGE, "assets/gfx/ground.png");
            assetManager.addAsset("ground2", param.IMAGE, "assets/gfx/ground2.png");
            assetManager.addAsset("ground3", param.IMAGE, "assets/gfx/ground3.png");
            assetManager.addAsset("ground4", param.IMAGE, "assets/gfx/ground4.png");
            assetManager.addAsset("ground5", param.IMAGE, "assets/gfx/ground5.png");
            assetManager.addAsset("fog", param.IMAGE, "assets/gfx/fog.png");

            //World
            assetManager.addAsset("world", param.FILE, "world/world.tmx");

            //Load assets
            assetManager.loadAssets();

            //Start game
            FM.Game.run("canvas", "Perspectives", 1024, 768, new menuState());
        };

        window.addEventListener("load", start, false);
    </script>
</head>

<body style="background-color: black;">

<canvas id="canvas" style="display: block;margin: auto; outline: none;" tabindex='1'>
    <p>
    	This application requires a browser that supports the HTML5 Canvas element.
    </p>
</canvas>

</body>
</html>
